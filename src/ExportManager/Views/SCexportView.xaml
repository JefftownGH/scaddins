<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:cal="http://www.caliburnproject.org"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:dgx="urn:tom-englert.de/DataGridExtensions"
    mc:Ignorable="d"
    xmlns:local="clr-namespace:SCaddins.ExportManager.ViewModels"
    x:Class="SCaddins.ExportManager.Views.SCexportView"
    d:DesignWidth="628" d:DesignHeight="272">

    <Grid >
        <Grid.ColumnDefinitions>
            <ColumnDefinition
                Width="0.80*" />
            <ColumnDefinition
                Width="0.10*" />
            <ColumnDefinition
                Width="0.10*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition
                Height="30" />
            <RowDefinition
                Height="*" />
            <RowDefinition
                Height="30" />
        </Grid.RowDefinitions>
        <ComboBox
            ItemsSource="{Binding ViewSheetSets}"
            SelectedItem="{Binding SelectedViewSheetSet}"
            Width="Auto"
            Height="Auto"
            Grid.Column="0"
            Grid.Row="0"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Margin="5"
            x:Name="ViewsetCombo"
            Grid.ColumnSpan="2" />
        <DataGrid
            x:Name="Sheets"
            SelectionMode="Extended"
            cal:Message.Attach="[Event SelectionChanged] = [Row_SelectionChanged($eventArgs)]; [Event KeyDown] = [ExecuteFilterView($eventArgs)]"
            AutoGenerateColumns="False"
            Grid.Column="0"
            Grid.Row="1"
            Width="Auto"
            Height="Auto"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Margin="5,0,5,5"
            Grid.ColumnSpan="3"
            GridLinesVisibility="Vertical"
            IsReadOnly="True">
            <DataGrid.Resources>
                <Style TargetType="DataGridRow">
                    <Setter Property="IsSelected" Value="{Binding IsSelected}" />
                    <Style.Resources>
                        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="{x:Static SystemColors.HighlightColor}" />
                            <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}" Color="{x:Static SystemColors.HighlightTextColor}"/>
                        </Style.Resources>
                </Style>
                <Style TargetType="{x:Type DataGridColumnHeader}">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                </Style>
            </DataGrid.Resources>
            <DataGrid.VerticalGridLinesBrush>
                <SolidColorBrush Color="{DynamicResource {x:Static SystemColors.WindowFrameColorKey}}"/>
            </DataGrid.VerticalGridLinesBrush>
            <DataGrid.HorizontalGridLinesBrush>
                <SolidColorBrush Color="{DynamicResource {x:Static SystemColors.WindowFrameColorKey}}"/>
            </DataGrid.HorizontalGridLinesBrush>
            <DataGrid.AlternatingRowBackground>
                <SolidColorBrush Color="{DynamicResource {x:Static SystemColors.ControlLightColorKey}}"/>
            </DataGrid.AlternatingRowBackground>
            
            <DataGrid.Columns>
                <DataGridTextColumn
                    Header="Export Name"
                    Binding="{Binding FullExportName}" />
                <DataGridTextColumn
                    Header="Number"
                    Binding="{Binding SheetNumber}" />
                <DataGridTextColumn
                    Width="*"
                    Header="Name"
                    Binding="{Binding SheetDescription}">
                    <DataGridTextColumn.HeaderTemplate>
                        <DataTemplate>
                            <Grid Width="Auto" HorizontalAlignment="Stretch">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="0.75*" ></ColumnDefinition>
                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" HorizontalAlignment="Stretch" Text="{Binding Content, RelativeSource={RelativeSource Mode=TemplatedParent}}" Margin="2"/>
                                <TextBox
                                    Grid.Column="1"
                                    Text="{Binding DataContext.SheetNameFilter, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
                                    Width="Auto"
                                    HorizontalContentAlignment="Right"
                                    HorizontalAlignment="Right"
                                    MinWidth="10"
                                    Margin="2">
                                </TextBox>
                            </Grid>
                        </DataTemplate>
                    </DataGridTextColumn.HeaderTemplate>
                </DataGridTextColumn>
                <DataGridTextColumn
                    Header="Revision"
                    Binding="{Binding SheetRevision}"/>
                <DataGridTextColumn
                    Header="Revision Description"
                    Binding="{Binding SheetRevisionDescription}" />
                <DataGridTextColumn
                    Header="Export Directory"
                    Binding="{Binding ExportDirectory}" />
                <DataGridTextColumn
                    Header="Scale"
                    Binding="{Binding Scale}" />
                <DataGridTextColumn
                    Header="North Point"
                    Binding="{Binding NorthPointVisible}" />
            </DataGrid.Columns>
            <DataGrid.ContextMenu>
                <ContextMenu>
                    <MenuItem
                        Header="No View Filter" cal:Message.Attach="RemoveViewFilter">
                        <MenuItem.Icon>
                            <Image
                                Source="/SCaddins;component/Assets/remove_filter.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem
                        Header="Filter">
                        <TextBox>Hello</TextBox>
                        <MenuItem Header="TEST"/>
                        <MenuItem Header="TEST2"/>
                        <MenuItem Header="TEST3"/>
                        <MenuItem.Icon>
                            <Image
                                Source="/SCaddins;component/Assets/filter.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator />
                    <MenuItem Header="Options"  cal:Message.Attach="OptionsButton">
                        <MenuItem.Icon>
                            <Image
                                Source="/SCaddins;component/Assets/gear.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator />
                    <MenuItem Header="Open Selected View[s]" cal:Message.Attach="OpenViewsCommand">
                        <MenuItem.Icon>
                            <Image
                                Source="/SCaddins;component/Assets/open.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator />
                    <MenuItem Header="Add Revision" cal:Message.Attach="AddRevision">
                        <MenuItem.Icon>
                            <Image
                                Source="/SCaddins;component/Assets/revision.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Copy Sheets" cal:Message.Attach="CopySheets">
                        <MenuItem.Icon>
                            <Image
                                Source="/SCaddins;component/Assets/copy.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Remove Underlays From View" cal:Message.Attach="RemoveUnderlays">
                        <MenuItem.Icon>
                            <Image
                                Source="/SCaddins;component/Assets/underlay.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Rename Selected Views" cal:Message.Attach="RenameSheets">
                        <MenuItem.Icon>
                            <Image
                                Source="/SCaddins;component/Assets/rename.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Fix Scale Bars" cal:Message.Attach="FixScaleBars">
                        <MenuItem.Icon>
                            <Image
                                Source="/SCaddins;component/Assets/ruler.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="North Points On" cal:Message.Attach="TurnNorthPointsOn">
                        <MenuItem.Icon>
                            <Image
                                Source="/SCaddins;component/Assets/north.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="North Points Off" cal:Message.Attach="TurnNorthPointsOff">
                        <MenuItem.Icon>
                            <Image
                                Source="/SCaddins;component/Assets/north.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Create User Views" cal:Message.Attach="CreateUserViews">
                        <MenuItem.Icon>
                            <Image
                                Source="/SCaddins;component/Assets/user.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator />
                    <MenuItem x:Name="SelectAll" Header="Select All" Click="SelectAll_Click">
                        <MenuItem.Icon>
                            <Image
                                Source="/SCaddins;component/Assets/add.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator />
                    <MenuItem Header="VerifySheets" cal:Message.Attach="VerifySheets">
                        <MenuItem.Icon>
                            <Image
                                Source="/SCaddins;component/Assets/check.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator />
                </ContextMenu>
            </DataGrid.ContextMenu>
        </DataGrid>
        <ProgressBar x:Name="CurrentProgress" Minimum="0" Maximum="{Binding ProgressBarMaximum}"  Grid.Column="0" Grid.Row="2" Margin="5,0,5,5"/>
        <TextBlock x:Name="ProgressBarText" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Column="0" Grid.Row="2" Margin="5,0,5,5">Test This Shxx</TextBlock>
        <Button
            cal:Message.Attach="Export"
            Content="Export"
            Width="Auto"
            Height="Auto"
            Grid.Row="2"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Margin="5,0,5,5"
            Grid.Column="2" />
        <Button
            cal:Message.Attach="Print"
            Content="Print"
            Height="Auto"
            Width="Auto"
            Grid.Row="2"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Margin="0,0,5,5"
            RenderTransformOrigin="0.3571,0.5476"
            x:Name="PrintButton"
            Grid.Column="1" />
        <Button
            Height="Auto"
            Width="Auto"
            Grid.Row="0"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Margin="5"
            x:Name="OptionsButton"
            Background="Transparent"
            BorderBrush="Transparent"
            Grid.Column="2">
            <Image Source="/SCaddins;component/Assets/gear.png" Stretch="None" />
            </Button>
    </Grid>












</UserControl>